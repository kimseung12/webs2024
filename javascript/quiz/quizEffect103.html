<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정보처리 기능사 100문제</title>

    <link rel="stylesheet" href="assets/css/gineungsa.css">
    <link rel="stylesheet" href="css/btn.css">
    <link rel="stylesheet" href="../../assets/css/default.min.css">
    <style>
        .modal__btn {
            color: #000 !important;
            border: 1px solid #000 !important;
            border-radius: 50px;
            display: inline-block;
            padding: 10px 20px;
            position: absolute;
            right: 20px;
            bottom: 20px;
            cursor: pointer;
        }
    </style>

</head>

<body>
    <header id="header">
        <h1>
            <a href="../index.html">Quiz</a>
        </h1>
    </header>
    <!-- //header -->

    <main id="main">
        <div class="quiz__wrap">
        </div>
        <div class="quiz__score">0</div>
    </main>
    <!-- //main -->

    <footer id="footer">
       <div class="modal__wrap">
            <div class="modal__btn">소스 보기</div>
            <div class="modal__cont">
                <div class="modal__box">
                    <div class="title">
                        <span class="dot" aria-label="true"></span>
                        <div class="tabs">
                            <div class="active">
                                <span class="favicon" aria-label="true">
                                    <svg width="16" height="16" viewBox="0 0 18 18" fill="none" aria-hidden="true" focusable="false">
                                        <circle cx="9" cy="9" r="9" fill="#fff"></circle>
                                        <path d="M18 9C18 13.9706 15.4688 3.09375 9 10.125C2.53125 17.1562 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z" fill="orange"></path>
                                        <path d="M18 9C18 13.9706 14.9062 0.84375 8.29688 6.1875C1.6875 11.5312 0 13.9706 0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9Z" fill="yellow"></path>
                                    </svg>
                                </span>
                                <em>Javascript</em>
                                <span class="close">
                                    <svg width="18" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true" focusable="false">
                                        <path d="M12.5 3.5L3.5 12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                        <path d="M12.5 12.5L3.5 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="cont">
                        <div class="active">
<pre><code class="language.js">// 선택자
    const quizWrap = document.querySelector(".quiz__wrap");
    

    // 문제 정보
    const quizInfo = [
        {
            infoDate : "2006년 5회",
            infoType : "정보처리 기능사",
            infoQuestion : "이항(binary) 연산에 해당하는 것은?",
            infoChoice : {
                1: "COMPLEMENT",
                2: "AND",
                3: "ROTATE",
                4: "SHIFT"
            },
            infoAnswer : "2",
            infoDesc : "단항연산 : ROTATE, SHIFT, MOVE, NOT(COMPLEMENT)"
        },{
            infoDate : "2006년 5회",
            infoType : "정보처리 기능사",
            infoQuestion : "프로그램이 컴퓨터의 기종에 관계없이 수행될 수 있는 성질을 의미하는 것은?",
            infoChoice : {
                1: "가용성",
                2: "신뢰성",
                3: "호환성",
                4: "안전성"
            },
            infoAnswer : "3",
            infoDesc : "컴퓨터의 기종에 관계없이 동작하므로 호환성입니다. 호환성이란 까스활명수, 까스명수, 베아제등 이름은 틀리지만 소화제의 기능을 하는것처럼 기종에 관계없이 동작할수 있는 것들을 말합니다."
        },{
            infoDate : "2006년 5회",
            infoType : "정보처리 기능사",
            infoQuestion : "제어장치가 앞의 명령 실행을 완료한 후, 다음에 실행 할 명령을 기억장치로부터 가져오는 동작을 완료할 때까지의 주기를 무엇이라고 하는가?",
            infoChoice : {
                1: "fetch cycle",
                2: "transfer cycle",
                3: "search time",
                4: "run time"
            },
            infoAnswer : "1",
            infoDesc : "명령어를 가지고 오는것을 fetch cycle 이라고 합니다."
        }
    ];

    // 문제 출력
    const updataQuiz = () => {
        const quizArray = [];

        quizInfo.forEach((quiz, index) => {
            quizArray.push(`
                &ltdiv class="quiz">
                    &ltdiv class="quiz__header">${quiz.infoDate} ${quiz.infoType}&lt/div>
                    &ltdiv class="quiz__main">
                        &ltdiv class="quiz__question">${index+1}. ${quiz.infoQuestion}&lt/div>
                        &ltdiv class="quiz__choice">
                            &ltlabel for="choice1-${index}">
                                &ltinput type="radio" id="choice1-${index}" name="choice-${index}" value="1">
                                &ltspan>${quiz.infoChoice[1]}&lt/span>
                            &lt/label>
                            &ltlabel for="choice2-${index}">
                                &ltinput type="radio" id="choice2-${index}" name="choice-${index}" value="2">
                                &ltspan>${quiz.infoChoice[2]}&lt/span>
                            &lt/label>
                            &ltlabel for="choice3-${index}">
                                &ltinput type="radio" id="choice3-${index}" name="choice-${index}" value="3">
                                &ltspan>${quiz.infoChoice[3]}&lt/span>
                            &lt/label>
                            &ltlabel for="choice4-${index}">
                                &ltinput type="radio" id="choice4-${index}" name="choice-${index}" value="4">
                                &ltspan>${quiz.infoChoice[4]}&lt/span>
                            &lt/label>      
                        &lt/div>
                        &ltdiv class="quiz__answer none">${quiz.infoAnswer}&lt/div>
                        &ltdiv class="quiz__desc none">${quiz.infoDesc}&lt/div>
                    &lt/div>
                    &ltdiv class="quiz__footer">
                        &ltbutton class="quiz__confirm" data-index="${index}">정답 확인하기&lt/button>
                    &lt/div>
                &lt/div>
            `); 
        });

        quizWrap.innerHTML = quizArray.join("");
    };
    
    // 정답 확인
    const answerQuiz = (index) => {
        const quizChoices = quizWrap.querySelectorAll(`.quiz__choice input[name="choice-${index}"]:checked`);
        const quizElement = quizWrap.querySelectorAll(".quiz")[index];
        const descElement = quizWrap.querySelectorAll(".quiz__desc")[index];
        const answerElement = quizWrap.querySelectorAll(".quiz__answer")[index];
        const confirmElement = quizWrap.querySelectorAll(".quiz__confirm")[index];


        if (quizChoices.length > 0) {
            const userAnswer = quizChoices[0].value;        //사용자가 체크한 정답
            if(userAnswer === quizInfo[index].infoAnswer){
                quizElement.classList.add("good");          // O 표시
                descElement.classList.remove("none");       // 해설 보기
            } else {
                quizElement.classList.add("bad");           // x 표시
                descElement.classList.remove("none");       // 해설 보기
                answerElement.classList.remove("none");     // 정답 보기
            }
            confirmElement.classList.add("none");           //정답 확인버튼 삭제
        } else {
            alert("보기를 선택해주세요!");
        }
    };

    // 페이지가 로드된 후 실행
    document.addEventListener("DOMContentLoaded", () => {
        updataQuiz();

        const quizConfirm = document.querySelectorAll(".quiz__confirm");


        quizConfirm.forEach((button, index) => {
            button.addEventListener("click", () => {
                answerQuiz(index);
            });
        });
    });
</code></pre>
                        </div>
                    </div>
                </div>
                <div class="modal__close">
                    <svg width="18" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true" focusable="false">
                        <path d="M12.5 3.5L3.5 12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M12.5 12.5L3.5 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </div>
            </div>
        </div>
        <a href="mailto:tmddnrla1@naver.com">tmddnrla1@naver.com</a>
    </footer>
    <!-- //footer -->

    <script src="../../assets/js/highlight.min.js"></script>
    <script src="../slider/js/common.js"></script>

    <script>
        // 선택자
        const quizWrap = document.querySelector(".quiz__wrap");

        // 문제 정보
        let quizInfo = [];

        // 문제 가져오기
        const fetchQuiz = () => {
            fetch("https://kimseung12.github.io/webs2024/json/gineungsaShort.json")
                .then(res => res.json())
                .then(items => {
                    quizInfo = items.map((item, index) => {
                        const formattedQuiz = {
                            infoDate: item.time,
                            infoQuestion: item.question,
                            infoAnswer: item.correct_answer,
                            infoDesc: item.question_desc
                        }
                        return formattedQuiz;
                    });

                    console.log(quizInfo)
                    updataQuiz(0);
                });
        };

        let quizScore = 0;
        let currentIndex = 0; // 현재 문제

        // 문제 출력
        const updataQuiz = (number) => {
            let quizWrapTag = `
                <div class="quiz">
                    <div class="quiz__header">
                        <span class="quiz__date">정보처리 ${quizInfo[number].infoDate}</span>
                    </div>
                    <div class="quiz__main">
                        <div class="quiz__question">
                            ${number + 1}. ${quizInfo[number].infoQuestion}
                            ${quizInfo[number].infoDesc ? `<div class="quiz__desc2">${quizInfo[number].infoDesc}</div>` : ''}
                        </div>
                        <div class="quiz__input">
                            <input type="text" id="quizInput" placeholder="정답을 입력해주세요!">
                        </div>
                        <div class="quiz__answer none">${quizInfo[number].infoAnswer}</div>
                        
                    </div>
                    <div class="quiz__footer">
                        <button class="quiz__confirm">정답 확인하기</button>
                        <button class="quiz__next none">다음 문제</button>
                    </div>
                </div>
            `;

            quizWrap.innerHTML = quizWrapTag;

            // 선택자
            const quizConfirm = quizWrap.querySelector(".quiz__confirm");
            const quizNext = quizWrap.querySelector(".quiz__next");

            // 정답 확인 버튼
            quizConfirm.addEventListener("click", () => {
                checkAnswer();
                quizConfirm.classList.add("none");      // 정답 버튼 삭제
                quizNext.classList.remove("none");      // 다음 버튼 추가
            });

            // 다음 문제 버튼
            quizNext.addEventListener("click", () => {
                if (currentIndex < quizInfo.length - 1) {
                    quizNext.classList.add("none");            // 다음 버튼 삭제
                    quizConfirm.classList.remove("none");      // 정답 버튼 추가
                    currentIndex++;                            //문제 번호 추가
                    updataQuiz(currentIndex);                   //퀴즈반영
                } else {
                    alert("퀴즈가 종료되었습니다.");
                }
            });
        };

        // 정답 확인
        const checkAnswer = () => {
            const quizElement = quizWrap.querySelector(".quiz")
            const quizConfirm = quizWrap.querySelector(".quiz__confirm");
            const quizNext = quizWrap.querySelector(".quiz__next");
            const quizInput = quizWrap.querySelector(".quiz__input input");
            const quizAnswer = quizWrap.querySelector(".quiz__answer");
            const userAnswer = quizInput.value.toLowerCase();
            const correctAnswer = quizInfo[currentIndex].infoAnswer.toLowerCase();

            if (userAnswer === correctAnswer) {
                quizElement.classList.add("good");
                quizAnswer.classList.remove("none");
                quizConfirm.classList.add("none");
                quizInput.classList.add("none");
                quizNext.classList.remove("none");
                quizScore++;
                updateScore();
            } else {
                quizElement.classList.add("bad");
                quizAnswer.classList.remove("none");
                quizConfirm.classList.add("none");
                quizInput.classList.add("none");
                quizNext.classList.remove("none");
            }

        }

        // 점수 업데이트
        const updateScore = () => {
            const scoreElement = document.querySelector(".quiz__score");
            scoreElement.textContent = quizScore; // 점수 업데이트
        }

        // 페이지가 로드된 후 실행
        document.addEventListener("DOMContentLoaded", () => {
            fetchQuiz();
        });
    </script>
</body>

</html>